<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.hardydou.com","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","width":240,"b2t":true,"scrollpercent":true,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="相信美好的事情即将发生">
<meta property="og:type" content="website">
<meta property="og:title" content="小鱼先生">
<meta property="og:url" content="http://www.hardydou.com/index.html">
<meta property="og:site_name" content="小鱼先生">
<meta property="og:description" content="相信美好的事情即将发生">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="小鱼先生">
<meta property="article:tag" content="小鱼先生">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.hardydou.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>小鱼先生</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小鱼先生</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">梦想还是要有的，万一忘记了咋办？</p>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-首页"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives" rel="section"><i class="fa fa-fw fa-归档"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags" rel="section"><i class="fa fa-fw fa-标签"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories" rel="section"><i class="fa fa-fw fa-分类"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section"><i class="fa fa-fw fa-关于"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/24/strategy-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/24/strategy-pattern/" class="post-title-link" itemprop="url">策略模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-24 14:43:00 / 修改时间：14:57:30" itemprop="dateCreated datePublished" datetime="2019-07-24T14:43:00+08:00">2019-07-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/24/strategy-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/24/strategy-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>行为模式，定义一组算法，将每个算法都封装起来，并且使他们之间可以互换。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-179.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>环境（Context)角色：<br>该角色也叫上下文角色，起到承上启下的作用，屏蔽高层模块对策略、算法的直接访问，它持有一个Strategy类的引用。</li>
<li>抽象策略（Strategy）角色：该角色对策略、算法进行抽象，通常定义每一个策略或算法必须具有的方法和属性。</li>
<li>具体策略（Concrete Strategy)角色：该角色实现抽象策略中的具体操作，含有具体的算法。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Strategy.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract Strategy&#123;</span><br><span class="line">	public abstract void strategyInterface();</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteStrategy.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteStrategy extends Strategy&#123;</span><br><span class="line">	public void strategyInterface()&#123;</span><br><span class="line">    	&#x2F;&#x2F;do something</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Context.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Context&#123;</span><br><span class="line">	private Strategy strategy&#x3D;null;</span><br><span class="line">    public Context(Strategy strategy)&#123;</span><br><span class="line">    	this.strategy&#x3D;strategy;</span><br><span class="line">    &#125;</span><br><span class="line">    public void contextInterface()&#123;</span><br><span class="line">    	this.strategy.strategyInterface();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>策略模式提供了管理相关的算法族的办法。策略类的登记结构定义一个算法或行为族，恰当地使用继承可以把公共代码迁移到父类中，从而避免代码重复。</li>
<li>策略模式提供了可以替换继承关系的办法。继承可以处理多种算法或行为，如果不用策略模式，那么使用算法或行为的环境类就可能会有一些子类，每一个子类提供一个不同的算法或行为。但是，这样算法或行为的使用者就和算法本身混在一起，从而不能再独立演化。</li>
<li>使用策略模式可以规避使用多重条件转移语句。</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>客户端必须知道所有的策略类，并自行解决使用哪一个策略类。</li>
<li>策略模式造成很多的策略类。</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><ul>
<li>多个类只是在算法或行为上稍有不同的场景。</li>
<li>算法需要自由切换的场景。</li>
<li>需要屏蔽算法规则的场景。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-180.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/24/chainofresponsibility-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/24/chainofresponsibility-pattern/" class="post-title-link" itemprop="url">责任链模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-24 14:17:00 / 修改时间：14:39:04" itemprop="dateCreated datePublished" datetime="2019-07-24T14:17:00+08:00">2019-07-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/24/chainofresponsibility-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/24/chainofresponsibility-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>行为模式，使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连城一条链，并沿着这条链传递请求，直到有对象处理它为止。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-177.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>抽象处理者（Handler)角色：<br>该角色对请求进行抽象，并定义一个方法以设定和返回对下一个处理者的引用。</li>
<li>具体处理者（ConcreteHandler)角色：<br>该角色接到请求后，可以选择将请求处理掉，或者将请求传递给下一个处理者。由于具体处理者持有下一个处理者的引用，因此如果需要，具体处理者可以访问下一个处理者。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Handler.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Handler&#123;</span><br><span class="line">	private Handler successor;</span><br><span class="line">    public abstract void handleRequest();</span><br><span class="line">    public Handler getSuccessor()&#123;</span><br><span class="line">    	return successor;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setSuccessor(Handler successor)&#123;</span><br><span class="line">    	this.successor&#x3D;successor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteHandler.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteHandler extends Handler&#123;</span><br><span class="line">	public void handleRequest()&#123;</span><br><span class="line">    	if(getSuccessor()!&#x3D;null)&#123;</span><br><span class="line">        	System.out.println(&quot;请求传递给&quot;+getSuccessor());</span><br><span class="line">            getSuccessor().handleRequest();</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">        	System.out.println(&quot;请求处理&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	Handler h1&#x3D;new ConcreteHandler();</span><br><span class="line">        Handler h2&#x3D;new ConcreteHandler();</span><br><span class="line">        h1.setSuccessor(h2);</span><br><span class="line">        h1.handleRequest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>责任链模式将请求和处理分开，请求者不知道是谁处理的，处理者可以不用知道请求的全貌。</li>
<li>提高系统的灵活性</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>降低程序的性能，每个请求都是从链头遍历到链尾，当链比较长的时候，性能会大幅下降。</li>
<li>不易调试，由于采用了类似递归的方式，调试时逻辑比较复杂。</li>
</ul>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>责任链中的节点数量需要控制，避免出现超长链的情况，这就需要设置一个最大的节点数量，超过则不允许增加节点，避免无意识地破坏系统的性能。</p>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>责任链模式是一种常见的模式，Struts2的核心空间FilterDispatcher就是一个Servlet过滤器，该空间就是采用责任链模式，可以对用户请求进行层层过滤处理。责任链模式在实际的项目中使用的比较多。</p>
<ul>
<li>一个请求需要一系列的处理工作</li>
<li>业务流的处理，例如，文件审批。</li>
<li>对系统进行补充扩展</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-178.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/23/command-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/23/command-pattern/" class="post-title-link" itemprop="url">命令模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-23 18:10:00" itemprop="dateCreated datePublished" datetime="2019-07-23T18:10:00+08:00">2019-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-07-24 13:49:02" itemprop="dateModified" datetime="2019-07-24T13:49:02+08:00">2019-07-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/23/command-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/23/command-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>行为模式，将一个请求封装成一个对象，从而让你使用不同的请求把客户端参数化，对请求排队或者记录请求日志，可以提供命令的撤销和恢复功能。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-176.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>命令（Command）角色：<br>该角色声明一个给所有具体命令类的抽象接口，定义需要执行的命令。</li>
<li>具体命令（Concrete Command）角色：<br>该角色定义一个接受者和行为之间的弱耦合，实现命令方法，并调用接收者的相应操作。</li>
<li>调用者（Invoker)角色：<br>该角色负责调用命令对象执行请求。</li>
<li>接受者（Receiver)角色；<br>该角色负责具体实施和执行一个请求。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Command.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Command&#123;</span><br><span class="line">	public void execute();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteCommand.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteCommand implements Command&#123;</span><br><span class="line">	private Receiver receiver;</span><br><span class="line">    public ConcreteCommand(Receiver receiver)&#123;</span><br><span class="line">    	this.receiver&#x3D;receiver;</span><br><span class="line">    &#125;</span><br><span class="line">    public void execute()&#123;</span><br><span class="line">    	this.receiver.action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Receiver.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Receiver&#123;</span><br><span class="line">	public void action()&#123;</span><br><span class="line">    	System.out.println(&quot;执行动作&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Invoker.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Invoker&#123;</span><br><span class="line">	private Command command;</span><br><span class="line">    public void setCommand(Command command)&#123;</span><br><span class="line">    	this.command&#x3D;command;</span><br><span class="line">    &#125;</span><br><span class="line">    public void action()&#123;</span><br><span class="line">    	this.command.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	Invoker invoker&#x3D;new Invoker();</span><br><span class="line">        Receiver receiver&#x3D;new Receiver();</span><br><span class="line">        Command command&#x3D;new ConcreteCommand(receiver);</span><br><span class="line">        invoker.setCommand(command);</span><br><span class="line">        invoker.action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul>
<li>类间解耦。<br>调用者角色与接受者角色之间没有任何依赖关系，调用者实现功能只需要调用Command中的execute()方法即可，不需要了解是哪个接收者执行。</li>
<li>可扩展性。<br>Command 的子类可以非常容易的扩展，而调用者Invoker和高层次的模块Client不产生严重的代码耦合。</li>
<li>命令模式结合其他模式会更优秀。命令模式可以结合责任链模式，实现命令族解析任务，结合模版方法模式，则可以减少Command子类的膨胀问题。</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>使用命令模式可能会导致系统中出现过多的具体命令类，因此需要再项目中慎重考虑使用。</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><ul>
<li>使用命令模式作为回调在面相对象系统中的替代。回调 讲的便是将一个函数登记上，然后在以后调用此函数。</li>
<li>需要在不同的时间制定请求、将请求排队。</li>
<li>系统需要支持命令的撤销。命令对象可以把状态存储起来，等到客户需要撤销时，可以调用undo()方法，将命令所产生的效果撤销。</li>
<li>需要将系统中所有的数据更新操作保存到日志里，以便在系统崩溃时，可以根据日志读回所有数据更新命令，重新调用execute方法一条条执行这些命令，从而恢复系统所在崩溃前所做的数据更新。</li>
<li>一个系统需要支持交易。一个交易结果封装了一组数据更新命令。使用命令模式实现交易结构可以使系统增加新的交易类型。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-175.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/23/templateMethod-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/23/templateMethod-pattern/" class="post-title-link" itemprop="url">模版方法模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-23 13:25:00 / 修改时间：17:59:12" itemprop="dateCreated datePublished" datetime="2019-07-23T13:25:00+08:00">2019-07-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/23/templateMethod-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/23/templateMethod-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>行为模式，定义一个操作中的算法的框架，而将一些步骤延迟到子类中。使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-172.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>抽象模版（Abstract Template)角色：<br>该角色定义一个后者多个抽象操作，以便让子类实现；这些抽象操作是基本操作，是一个顶级逻辑的组成步骤。还需要定义并实现一个或几个模版方法，这些模版方法一般是具体方法，即一个框架，实现对基本方法的调度，完成固定逻辑。</li>
<li>具体模版（ConcreteTemplate)角色：<br>该角色实现抽象模版中定义的一个或者多个抽象方法，每一个抽象模版角色都可以有任意多个具体模版角色与之对应，而没一个具体模版角色都可以给出这些抽象方法的不同实现，从而使得顶级逻辑的实现各不相同。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>AbstractClass.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractClass&#123;</span><br><span class="line">	protected abstract void operation();</span><br><span class="line">    public void templateMethod()&#123;</span><br><span class="line">    	this.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteClass.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteClass extends AbstractClass&#123;</span><br><span class="line">	protected void operation()&#123;</span><br><span class="line">    	&#x2F;&#x2F;do some things</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	AbstractClass ac&#x3D;new ConcreteClass();</span><br><span class="line">        ac.templateMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>封装不变的部分，扩展可变的部分。不变的部分封装到父类中实现，可变的部分则可以通过继承进行扩展。</li>
<li>提取公共代码部分，便于维护。将公共部分的代码提取出来放在父类中，维护时只需要修改父类中的代码。</li>
<li>行为由父类控制，子类实现。模版方法模式中的基本方法是由子类实现的，因此子类可以通过扩展增加相应的功能复合开闭原则。</li>
</ul>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul>
<li>多个子类有公共方法，并且逻辑基本相同时。</li>
<li>可以把重要的、复杂的、核心算法设计为模版方法，周边的相关细节功能则由各个子类实现。</li>
<li>重构时，模版方法模式是一个经常使用的模式，将相同的代码抽取到父类中。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-173.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/22/flyweight-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/22/flyweight-pattern/" class="post-title-link" itemprop="url">享元模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-22 11:34:55 / 修改时间：11:58:48" itemprop="dateCreated datePublished" datetime="2019-07-22T11:34:55+08:00">2019-07-22</time>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/22/flyweight-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/22/flyweight-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>使用共享对象可有效的支持大量细粒度的对象。享元对象能做到共享的关键是区分内部状态和外部状态。</p>
<ul>
<li>内部状态是存储在享元对象内部的、可以共享的信息，并且不会随环境改变而改变。</li>
<li>外部状态是随环境改变而改变且不可以共享的状态。享元对象的外部状态必须又客户端保存，并在享元对象被创建之后，在需要使用的时候再传入到享元对象内部。</li>
</ul>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-170.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>抽象享元（Flyweight）角色：<br>该角色对享元类进行抽象，需要外部状态操作可以通过参数的形式将外部状态传入。</li>
<li>具体享元（ConcreteFlyweight）角色：<br>该角色实现抽象享元定义的业务，注意享元对象的内部状态必须与环境无关，从而使得享元对象可以在系统内共享。</li>
<li>享元工厂（FlyweightFactory）角色：<br>该角色就是构造一个池容器，负责创建和管理享元角色，并提供从池容器中获得对象的方法，保证享元对象可以被系统适当的共享。当一个客户端对象请求一个享元对象时，享元工厂角色会检查系统中是否已经有一个符合要求的享元对象。如果存在直接提供；否则创建一个合适的对象。</li>
<li>客户端（Client)角色：<br>该角色需要自行存储所有享元对象的外部状态。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Flyweight.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Flyweight&#123;</span><br><span class="line">	public abstract void operation(String extrinsicState);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteFlyweight.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteFlyweight implements Flyweight&#123;</span><br><span class="line">	private String intrinsicState;&#x2F;&#x2F;内部状态</span><br><span class="line">    public ConcreteFlyweight(String intrinsicState)&#123;</span><br><span class="line">    	this.intrinsicState&#x3D;intrinsicState;</span><br><span class="line">    &#125;</span><br><span class="line">    public void operation(String extrinsicState)&#123;</span><br><span class="line">    	System.out.println(&quot;内部状态&quot;+intrinsicState</span><br><span class="line">        				+&quot;外部状态&quot;+extrinsicState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FlyweightFactory.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class FlyweightFactory&#123;</span><br><span class="line">	private static Map&lt;String,Flyweight&gt; pool&#x3D;new HashMap&lt;String,Flyweight&gt;();</span><br><span class="line">    private FlyweightFactory()&#123;&#125;</span><br><span class="line">    public static Flyweight getFlyweight(String intrinsicState)&#123;</span><br><span class="line">    	Flyweight flyweight&#x3D;pool.get(intrinsicState);</span><br><span class="line">        if(flyweight&#x3D;&#x3D;null)&#123;</span><br><span class="line">        	flyweight&#x3D;new ConcreteFlyweight(intrinsicState);</span><br><span class="line">            pool.put(intrinsicState,flyweight);</span><br><span class="line">        &#125;</span><br><span class="line">        return flyweight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><p>享元模式的优点在于大幅减少内存中对象的数量，降低程序的内存的占用，提高性能。</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>享元模式增加了系统的复杂性，需要分出外部状态和内部状态，而且内部状态具有固化特性，不应该随外部状态改变而改变，这使得程序的逻辑复杂化。</li>
<li>享元模式将享元对象的状态外部化，而读取外部状态使得运行时间边长。</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><ul>
<li>系统中有大量的相似对象，这些对象耗费大量内存。</li>
<li>细粒度的对象都具备较接近的外部状态，而且内部状态与环境无关，即对象没有特定身份</li>
<li>需要缓冲池的场景。</li>
</ul>
<p>Java基础类库中大量使用了享元模式：String、Integer、Boolean、Character、等。都是通过享元模式提供了内部的池化机制。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-171.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/22/facade-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/22/facade-pattern/" class="post-title-link" itemprop="url">外观模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-22 11:22:00 / 修改时间：11:34:29" itemprop="dateCreated datePublished" datetime="2019-07-22T11:22:00+08:00">2019-07-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/22/facade-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/22/facade-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>要求一个子系统的外部与其内部的通信必须通过一个统一的对象进行。外观模式提供一个高层侧的接口，使得子系统更易使用。<br><img src="/images/pasted-166.png" alt="upload successful"></p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-167.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>外观（Facade）角色：<br>客户端可以调用该角色的方法，该角色知晓相关子系统的功能和责任。正常情况下，本角色会将所有从客户端发出来的请求委派到相应的子系统，即该角色没有实际的业务逻辑，只是一个委托类。</li>
<li>子系统（Subsystem)角色：<br>可以同时有一个或者多个子系统，每一个子系统都不是一个单独的类，而是一个类的集合。子系统不知道外观角色的存在，对子系统而言，外观角色仅仅是另一个客户端而已。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>子系统集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class ClassA&#123;</span><br><span class="line">	public void methodA()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">public class ClassB&#123;</span><br><span class="line">	public void methodB()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">public class ClassC&#123;</span><br><span class="line">	public void methodC()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Facade.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Facde&#123;</span><br><span class="line">	private ClassA a&#x3D;new ClassA();</span><br><span class="line">    private ClassB b&#x3D;new ClassB();</span><br><span class="line">    private ClassC c&#x3D;new Classc();</span><br><span class="line">    public void methodA()&#123;</span><br><span class="line">    	a.methodA();</span><br><span class="line">    &#125;</span><br><span class="line">    public void methodB()&#123;</span><br><span class="line">    	b.methodB();</span><br><span class="line">    &#125;</span><br><span class="line">    public void methodC()&#123;</span><br><span class="line">    	c.methodC();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>减少系统的互相依赖，所有依赖都是对Facade对象的依赖，与子系统无关。</li>
<li>提高灵活性，不管子系统内部如何变化，只要不影响Facade对象，任何活动都是自由的。</li>
<li>提高安全性，Facade中未提供的方法，外界就无法访问，提高系统的安全性。</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><ul>
<li>为一个复杂的模块或子系统提供一个供外界访问的接口。</li>
<li>子系统相对独立，外界对子系统的访问需要黑箱操作即可。</li>
<li>预防风险扩散，使用Facade进行访问操作控制。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-169.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/22/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/22/git/" class="post-title-link" itemprop="url"> Git 分支协作模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-22 10:17:00 / 修改时间：10:56:04" itemprop="dateCreated datePublished" datetime="2019-07-22T10:17:00+08:00">2019-07-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/22/git/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/22/git/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><p> 3人通过本地仓库 master 分支向远程仓库 master 分支提交代码<br><img src="/images/pasted-161.png" alt="upload successful"></p>
<h3 id="解决频繁的代码提交冲突"><a href="#解决频繁的代码提交冲突" class="headerlink" title="解决频繁的代码提交冲突"></a>解决频繁的代码提交冲突</h3><p>本地 master 分支检出新分支开发推送到远端仓库后，通过 Pull Request 合并到 master，然后拉回本地 master。<br><img src="/images/pasted-162.png" alt="upload successful"></p>
<h3 id="初步解决代码迭代版本问题"><a href="#初步解决代码迭代版本问题" class="headerlink" title="初步解决代码迭代版本问题"></a>初步解决代码迭代版本问题</h3><p>通过远程仓库 master 分支在版本发布时，检出一个以版本号命名的分支，作为特定版本管理。<br><img src="/images/pasted-163.png" alt="upload successful"></p>
<h3 id="团队增长带来的困扰"><a href="#团队增长带来的困扰" class="headerlink" title="团队增长带来的困扰"></a>团队增长带来的困扰</h3><ul>
<li>随着协作人数增多，远程仓库分支数量快速增长，查找起来很麻烦，经常出现分支重名问题。</li>
<li>分支命名混乱，提交新功能的分支和修复Bug的分支经常混淆在一块。</li>
<li>版本迭代的速度太快，产生了一大堆的 Realease 分支，又带来了一堆的管理问题。</li>
<li>还没来得及合并或独立维护的分支，时间久了容易出现管理遗漏和维护混乱。</li>
<li>虽然有 Code Review，但程序的 Bug 数和 Crash 频率明显随团队规模而增长，生产事故发生率和回滚率提高。</li>
<li>还有人把手头未完成开发的分支扔到远程仓库进行托管。 </li>
</ul>
<h3 id="单个仓库还是多个仓库？"><a href="#单个仓库还是多个仓库？" class="headerlink" title="单个仓库还是多个仓库？"></a>单个仓库还是多个仓库？</h3><p><img src="/images/pasted-164.png" alt="upload successful"></p>
<h3 id="用「分支模型」规范分支管理"><a href="#用「分支模型」规范分支管理" class="headerlink" title="用「分支模型」规范分支管理"></a>用「分支模型」规范分支管理</h3><p><img src="/images/pasted-165.png" alt="upload successful"></p>
<h3 id="灵活使用-Git-tag-和发行版管理功能"><a href="#灵活使用-Git-tag-和发行版管理功能" class="headerlink" title="灵活使用 Git tag 和发行版管理功能"></a>灵活使用 Git tag 和发行版管理功能</h3><ul>
<li>在 git 中，标签（tag）是特定提交（commit) 的一个指针，也就是每个 tag 对应一个特定的 commit。release/* 系列分支在实质上就是合并到 Product (master) 分支上成为一个特殊提交，所以 tag 的存在使得没有必要保留 release/* 分支。</li>
<li>另外，一般形如[码云]这样的 git 代码托管平台，本身自带「发行版（Release）」功能。</li>
<li>通过 git 本身只能记录项目的修改，而版本发布带来的项目构建物（特别是二进制文件）本身在某种意义上就不适合通过 git 进行存储。</li>
<li>通过「发行版（Release）」功能，可以将对应版本的源代码和生成的项目构建物（比如exe/dmg）保存下来，还支持编写对应的 Changelog，便于查找下载。</li>
</ul>
<h3 id="使用-Git-flow-脚本规范本地分支和开发"><a href="#使用-Git-flow-脚本规范本地分支和开发" class="headerlink" title="使用 Git-flow 脚本规范本地分支和开发"></a>使用 Git-flow 脚本规范本地分支和开发</h3><p> 除了在远程仓库上的管理方案，张三还建议提倡团队成员通过 [git-flow] 一系列的脚本扩展，规范本地的分支管理和开发流程。现网络上最流行的 git-flow 方案应该是 AVH 版 git-flow：<a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener">https://nvie.com/posts/a-successful-git-branching-model/</a> 。通过安装后，开发成员可以在本地通过对项目的各类功能分支进行定义。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p> 除了在远程仓库上的管理方案，张三还建议提倡团队成员通过 [git-flow] 一系列的脚本扩展，规范本地的分支管理和开发流程。现网络上最流行的 git-flow 方案应该是 AVH 版 git-flow：<a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener">https://nvie.com/posts/a-successful-git-branching-model/</a> 。通过安装后，开发成员可以在本地通过对项目的各类功能分支进行定义。<br><img src="/images/pasted-168.png" alt="upload successful"></p>
<p>接下来的问题就比较简单了，在码云 gitee.com 上新建仓库，选择相应的分支模型即可。Git 的分支相比 SVN 来说是非常轻量级的，善用分支有利于更清晰的进行开发过程的管理。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/19/bridge-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/19/bridge-pattern/" class="post-title-link" itemprop="url">桥梁模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-19 15:34:00 / 修改时间：16:14:21" itemprop="dateCreated datePublished" datetime="2019-07-19T15:34:00+08:00">2019-07-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/19/bridge-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/19/bridge-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>将抽象和实现解耦，使得两者可以独立变化。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-159.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>抽象化（Abstraction)角色<br>该角色抽象化的给出定义，并保存一个对实现化对象的引用。</li>
<li>实现化（Implementor)角色<br>该角色给出实现化角色的接口，但不给出具体的实现。</li>
<li>修正抽象化（RefinedAbstraction)角色<br>该角色扩展抽象化角色，它引用实现化绝角色并对抽象化角色进行修正。</li>
<li>具体实现化（ConcreteImplementor)角色<br>该角色对实现化角色接口中的方法进行具体实现。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Implementor.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Implementor&#123;</span><br><span class="line">	public void operationImp();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteImplementor.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteImplementor implements Implementor&#123;</span><br><span class="line">	public void operationImp()&#123;</span><br><span class="line">    	&#x2F;&#x2F;业务代码</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Abstarction.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Abstraction &#123;</span><br><span class="line">	private Implementor imp;</span><br><span class="line">    public Abstraction(Implementor imp)&#123;</span><br><span class="line">    	this.imp&#x3D;imp;</span><br><span class="line">    &#125;</span><br><span class="line">    public void operation()&#123;</span><br><span class="line">    	this.imp.operationImp();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RefinedAbstraction.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class RefinedAbstraction extends Abstraction&#123;</span><br><span class="line">	public RefinedAbstraction (Implementor imp)&#123;</span><br><span class="line">    	super(imp);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;修正父类的方法</span><br><span class="line">    public void operation()&#123;</span><br><span class="line">    	&#x2F;&#x2F;业务代码</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	&#x2F;&#x2F;定义一个实例化角色</span><br><span class="line">        Implementor imp&#x3D;new ConcreteImplementor();</span><br><span class="line">        Abstraction abs&#x3D;new RefinedAbstraction(imp);</span><br><span class="line">        abs.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>抽象和实现分离是桥梁模式的主要特点，是为了解决继承的缺点而提出的设计模式。该模式下可以不接受抽象的约束，不用绑定在一个固定的抽象层次上。</li>
<li>实现对客户透明，客户端不用关心细节的实现，它已经由抽象层通过聚合关系完成封装。</li>
<li>提高灵活性和扩展性</li>
</ul>
<h2 id="使用场合"><a href="#使用场合" class="headerlink" title="使用场合"></a>使用场合</h2><ul>
<li>如果一个系统需要再构件的抽象化角色和具体角色之间增加更多的灵活性，避免在两层次之间建立静态的联系</li>
<li>设计要求实现化角色的任何改变不影响客户端，或者说实现化角色的改变对客户端完全透明。</li>
<li>一个构件有多于一个的抽象化角色和实现化角色，系统需要他们之间进行动态耦合。</li>
<li>不希望或不适合使用继承的场合。继承具有强入侵性质，即父类有的方法子类必须有；而桥梁模式是弱关联关系。</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-160.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/10/composite-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/10/composite-pattern/" class="post-title-link" itemprop="url">组合模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-07-10 11:35:00 / 修改时间：12:15:52" itemprop="dateCreated datePublished" datetime="2019-07-10T11:35:00+08:00">2019-07-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/10/composite-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/10/composite-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>将对象组合成树形结构以表示”部分-整体“的层次结构，使得用户对单个对象和组合对象的使用具有一致性。</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-157.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>抽象构件（Component）角色<br>该角色定义参加组合对象的共有方法和属性，规范一些默认的行为接口。</li>
<li>叶子构件（Leaf）角色<br>该角色是叶子对象，其下没有其他分支，定义出参加组合的原始对象行为。</li>
<li>树枝构件（Composite）角色<br>该角色代表参加组合的、其下有分支的树枝对象，他的作用是将树枝和叶子组合成一个树形结构，并定义出管理子对象的方法，如add()、remove()等。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Component.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Component&#123;</span><br><span class="line">	public void operation();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Composite.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Composite implements Component&#123;</span><br><span class="line">  private ArrayList&lt;Component&gt; componentList&#x3D;new ArrayList&lt;Component&gt;();</span><br><span class="line">  public void add(Component component)&#123;</span><br><span class="line">      this.componentList.add(component);</span><br><span class="line">  &#125;</span><br><span class="line">  public void remove(Component component)&#123;</span><br><span class="line">      this.componentList.remove(component);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public ArrayList&lt;Component&gt; getChild()&#123;</span><br><span class="line">      return this.componentList;</span><br><span class="line">  &#125;</span><br><span class="line">  public void operation()&#123;</span><br><span class="line">      &#x2F;&#x2F;业务代码</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Leaf.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Leaf implements Component&#123;</span><br><span class="line">	public void operation()&#123;</span><br><span class="line">    	&#x2F;&#x2F;业务代码</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	&#x2F;&#x2F;创建一个根节点</span><br><span class="line">        Composite root&#x3D;new Composite();</span><br><span class="line">        root.operation();</span><br><span class="line">        &#x2F;&#x2F;创建树枝节点</span><br><span class="line">        Composite branch&#x3D;new Composite();</span><br><span class="line">        &#x2F;&#x2F;创建叶子节点</span><br><span class="line">        Leaf leaf&#x3D;new Leaf();</span><br><span class="line">        root.add(branch);</span><br><span class="line">        branch.add(leaf);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static void display(Composite root)&#123;</span><br><span class="line">    	for(Composite c:root.getChild())&#123;</span><br><span class="line">        	if(c instaceof Leaf)&#123;</span><br><span class="line">            	c.operation();</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">            	c.operation();</span><br><span class="line">                display((Composite)c);&#x2F;&#x2F;递归调用</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    	</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>高层模块调用简单。<br>一颗树形机构中的所有节点都是Component，局部和整体对调用者来说没有任何区别，即高层模块不必关心自己处理的是单个对象还是整个组合结构，简化了高层模块的代码。</li>
<li>节点自由增加。<br>使用组合模式后，如果想增加一个树枝节点、树叶节点只需要找到其父节点即可。</li>
</ul>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li>不易控制树枝结构的类型；</li>
<li>不易使用继承的方法来增加新的行为。</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><ul>
<li>需要描述对象的部分和整体的等级结构，如树形菜单、文件和文件夹管理。</li>
<li>需要客户端忽略个体构件和组合构件的区别，平等对待所有的构件。</li>
</ul>
<p>组合模式也是应用广泛的一种设计模式，例如，java基础类库的swing部分中就大量使用了组合模式，大部分控件都是JComponent的子类，同时其add()方法又可向界面添加JComponent类型的控件，从而使得使用者可以统一的方式操作各种控件。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-158.png" alt="upload successful"><br>Company.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Company&#123;</span><br><span class="line">	&#x2F;&#x2F;获取信息</span><br><span class="line">    public String getInfo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ConcreteCompany.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;树枝节点类</span><br><span class="line">public class ConcreteCompany&#123;</span><br><span class="line">	private ArrayList&lt;Company&gt; companyList&#x3D;new ArrayList&lt;Company&gt;();</span><br><span class="line">    private String name;</span><br><span class="line">    private String position;</span><br><span class="line">    private int salary;</span><br><span class="line">    </span><br><span class="line">    public ConcreteCompany(String name,String position,int salary )&#123;</span><br><span class="line">    this.name&#x3D;name;</span><br><span class="line">    this.position&#x3D;position;</span><br><span class="line">    this.salary&#x3D;salary;</span><br><span class="line">    &#125;</span><br><span class="line">    public void add(Company company)&#123;</span><br><span class="line">    	this.companyList.add(company);</span><br><span class="line">    &#125;</span><br><span class="line">    public void remove(Company company)&#123;</span><br><span class="line">    	this.companyList.remove(company);</span><br><span class="line">    &#125;</span><br><span class="line">    public ArrayList&lt;Company&gt; getChild()&#123;</span><br><span class="line">    	return this.companyList;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getInfo()&#123;</span><br><span class="line">    	String info&#x3D;&quot;&quot;;</span><br><span class="line">        info&#x3D;&quot;名称:&quot;+this.name;</span><br><span class="line">        info&#x3D;info+&quot;\t职位:&quot;+this.position;</span><br><span class="line">        info&#x3D;info+&quot;\t薪水:&quot;+this.salary;</span><br><span class="line">        return info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Employee.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Employee implements Company&#123;</span><br><span class="line">	private String name;</span><br><span class="line">    private String position;</span><br><span class="line">    private int salary;</span><br><span class="line">    </span><br><span class="line">    public Employee(String name,String position,int salary)&#123;</span><br><span class="line"> 		this.name&#x3D;name;</span><br><span class="line">        this.position&#x3D;position;</span><br><span class="line">        this.salary&#x3D;salary;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getInfo()&#123;</span><br><span class="line">    	Stirng info&#x3D;&quot;&quot;;</span><br><span class="line">        info+&#x3D;&quot;名称:&quot;+this.name;</span><br><span class="line">        info+&#x3D;&quot;\t职称:&quot;+this.position;</span><br><span class="line">        info+&#x3D;&quot;\t薪水:&quot;+this.salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ClientDemo.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public class ClientDemo&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	ConcreteCompany root&#x3D;new ConcreteCompany(&quot;张三&quot;,&quot;CEO&quot;,10000);</span><br><span class="line">        ConcreteCompany developDep&#x3D;new ConcreteCompany(&quot;李四&quot;,&quot;研发经理&quot;,8000);</span><br><span class="line">        ConcreteCompany salDep&#x3D;new ConcreteCompany(&quot;王五&quot;,&quot;销售经理&quot;,8000);</span><br><span class="line">        ConcreteCompany financeDep&#x3D;new ConcreteCompan(&quot;马六&quot;,&quot;财务经理&quot;,8000);</span><br><span class="line">        </span><br><span class="line">        Employee e1&#x3D;new Employee(&quot;A&quot;,&quot;研发部&quot;,3000);</span><br><span class="line">        Employee e2&#x3D;new Employee(&quot;B&quot;,&quot;研发部&quot;,3000);</span><br><span class="line">        Employee e3&#x3D;new Employee(&quot;C&quot;,&quot;研发部&quot;,3000);</span><br><span class="line">        Employee e4&#x3D;new Employee(&quot;D&quot;,&quot;销售部&quot;,4000);</span><br><span class="line">        Employee e5&#x3D;new Employee(&quot;E&quot;,&quot;销售部&quot;,3000);</span><br><span class="line">        Employee e6&#x3D;new Employee(&quot;F&quot;,&quot;销售部&quot;,2000);</span><br><span class="line">        Employee e7&#x3D;new Employee(&quot;G&quot;,&quot;销售部&quot;,3000);</span><br><span class="line">        Employee e8&#x3D;new Employee(&quot;H&quot;,&quot;财务部&quot;,4000);</span><br><span class="line">        Employee e9&#x3D;new Employee(&quot;I&quot;,&quot;财务部&quot;,2000);</span><br><span class="line">        root.add(developDep);</span><br><span class="line">        root.add(salesDep);</span><br><span class="line">        root.add(financeDep);</span><br><span class="line">        developDep.add(e1);</span><br><span class="line">        developDep.add(e2);</span><br><span class="line">        developDep.add(e3);</span><br><span class="line">        salesDep.add(e4);</span><br><span class="line">        salesDep.add(e5);</span><br><span class="line">        salesDep.add(e6);</span><br><span class="line">        salesDep.add(e7);</span><br><span class="line">        financeDep.add(e8);</span><br><span class="line">        financeDep.add(e9);</span><br><span class="line">        System.out.println(root.getInfo());</span><br><span class="line">        display(root);</span><br><span class="line"> 	&#125;</span><br><span class="line">    </span><br><span class="line">    public static void display(ConcreteCompany root)&#123;</span><br><span class="line">    	for(Company c:root.getChild())&#123;</span><br><span class="line">        	if(c instanceof Employee)&#123;</span><br><span class="line">            	System.out.println(e.getInfo());</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">            	System.out.println(&quot;\n&quot;+c.getInfo());</span><br><span class="line">                display((ConcreteCompany)c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.hardydou.com/2019/07/04/adapter-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小鱼先生">
      <meta itemprop="description" content="相信美好的事情即将发生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鱼先生">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/04/adapter-pattern/" class="post-title-link" itemprop="url">适配器模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-04 12:25:00" itemprop="dateCreated datePublished" datetime="2019-07-04T12:25:00+08:00">2019-07-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-07-10 11:35:19" itemprop="dateModified" datetime="2019-07-10T11:35:19+08:00">2019-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">架构设计</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/07/04/adapter-pattern/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/07/04/adapter-pattern/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>将一个类的接口变换成客户端所期待的另一种接口，从而使原本因接口不匹配而无从在一起工作的两个类能够在一起工作</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="/images/pasted-155.png" alt="upload successful"></p>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><ul>
<li>目标角色（target）<br>该角色定义要转换成的目标接口。</li>
<li>源角色（Adaptee）<br>需要被转换成目标角色的源角色</li>
<li>适配器角色（Adapter）<br>该角色是适配器模式的核心，其职责是通过继承或是类关联的方式，将源角色转换为目标角色。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>Adaptee.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class Adaptee&#123;</span><br><span class="line">	public void specificRequest()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Target.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface Target&#123;</span><br><span class="line">	public void request();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Adapter.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Adapter extends Adaptee implements Target&#123;</span><br><span class="line">	public void request()&#123;</span><br><span class="line">    	super.specificRequest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Client&#123;</span><br><span class="line">	public static void main(String args[])&#123;</span><br><span class="line">    	Target target&#x3D;new Adapter();</span><br><span class="line">        target.request();</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>适配器模式可以让两个没有任何关系的类在一起运行。</li>
<li>增加了类的透明性</li>
<li>提高类的复用度</li>
<li>增强代码的灵活性</li>
</ul>
<h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>使用适配器的典型场景：修改一个已经投产中的系统时，需要对系统进行扩展，此时使用一个已有的类，但这个类不符合系统中的接口，这时使用适配器模式是最合适的，它可以将不符合系统接口的类进行转换，转换成符合系统接口的、可以使用的类。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p><img src="/images/pasted-156.png" alt="upload successful"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小鱼先生"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">小鱼先生</p>
  <div class="site-description" itemprop="description">相信美好的事情即将发生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/HardyDou" title="GitHub → https://github.com/HardyDou" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:doouxiaoyu@163.com" title="E-Mail → mailto:doouxiaoyu@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn" rel="noopener" target="_blank">京ICP备18050184号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小鱼先生</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : true,
      appId      : 'fF3IzJ6TkcmNPCPo4nYayNln-gzGzoHsz',
      appKey     : 'CaEuIN0359VyWiygnoDPQxx1',
      placeholder: "请讲!!",
      avatar     : 'mp',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
